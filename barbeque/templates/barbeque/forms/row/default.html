{% load barbeque_tags %}
{% load floppyforms %}


{% block row %}
	<div class="{{ form.row_classname }}">
		{% for field in fields %}
			{% set name=name|default:field.name %}
			{% set label=label|default:field.label %}
			{% set help_text=help_text|default:field.help_text %}
			{% set errors=errors|default:field.errors %}
			{% set required=required|default:field.field.required %}
			{% set classes=classes|default:field.css_classes %}
			{% set type=type|default:field.field.widget.widget_type %}


			<label
				class="form-field-{{ type }} has-name-{{ name|slugify }}{{ required|yesno:' is-required,' }}{% if errors %} has-errors{% endif %}{% if classes %} {{ classes }}{% endif %}"
				for="{{ field|id }}">

				{% if type == 'checkboxinput' %}
					<span class="field">
						{% block field_checkboxinput %}{% formfield field %}{% endblock %}
					</span>
				{% endif %}

				<span class="label">
					{% block label %}{{ label|safe }}{% endblock %}
				</span>

				{% if type != 'checkboxinput' %}
					<span class="field">
						{% block field %}
							{% if type == 'checkboxselectmultiple' %}
								{% formfield field using 'barbeque/forms/field/checkboxselectmultiple.html' %}
							{% elif type == 'radioselect' %}
								{% formfield field using 'barbeque/forms/field/radioselect.html' %}
							{% elif type == 'selectdatewidget' %}
								{% formfield field using 'barbeque/forms/field/selectdatewidget.html' %}
							{% else %}
								{% formfield field with placeholder=label %}
							{% endif %}
						{% endblock %}
					</span>
				{% endif %}

				{% if errors %}
					<sub class="errors">
						{% block errorlist %}
							{{ errors }}
						{% endblock %}
					</sub>
				{% endif %}

				{% if help_text %}
					<sub class="helptext">
						{% block help_text %}
							{{ help_text }}
						{% endblock %}
					</sub>
				{% endif %}
			</label>
		{% endfor %}
		{% block hidden_fields %}
			{% for field in hidden_fields %}{{ field.as_hidden }}{% endfor %}
		{% endblock %}
	</div>
{% endblock %}
